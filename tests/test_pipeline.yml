- name: Run all steps in the pipeline with test data using docker profile.
  tags:
    - docker
  command: nextflow run main.nf -profile docker,ci,test
  files:
    - path: "test-output/all_samples.csv"
      md5sum: 485508e3cacc4ff1486d484682b616fb
    - path: "test-output/variants/NA12878.vcf.gz"
      should_exist: True
    - path: "test-output/variants/NA12878.vcf.gz.tbi"
      should_exist: True
    - path: "test-output/alignments/NA12878.sorted.bam"
      should_exist: True
    - path: "test-output/alignments/NA12878.sorted.bai"
      should_exist: True

- name: Run all steps in the pipeline with test data using conda profile.
  tags:
    - mamba
  command: nextflow run main.nf -profile mamba,ci,test_19
  files:
    - path: "test-output/all_samples.csv"
      md5sum: 485508e3cacc4ff1486d484682b616fb
    - path: "test-output/variants/NA12878.vcf.gz"
      should_exist: True
    - path: "test-output/variants/NA12878.vcf.gz.tbi"
      should_exist: True
    - path: "test-output/alignments/NA12878.sorted.bam"
      should_exist: True
    - path: "test-output/alignments/NA12878.sorted.bai"
      should_exist: True
